/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/core/Lib","sap/ui/core/date/UniversalDate","sap/ui/unified/CalendarAppointment","sap/ui/unified/CalendarLegendRenderer","sap/ui/Device","sap/ui/unified/library","sap/ui/core/InvisibleText","sap/ui/core/date/UI5Date","sap/base/Log","sap/ui/core/IconPool"],function(e,t,a,n,i,r,s,l,o,p){"use strict";var d=s.CalendarDayType;var g=s.CalendarIntervalType;var c=s.CalendarAppointmentVisualization;var v=s.CalendarAppointmentHeight;var f={apiVersion:2};f.render=function(e,t){var a=t.getTooltip_AsString();var n=t.getAppointmentsVisualization();var i=this.getLegendItems(t);e.openStart("div",t);e.class("sapUiCalendarRow");if(!r.system.phone&&t.getAppointmentsReducedHeight()){e.class("sapUiCalendarRowAppsRedHeight")}if(n!=c.Standard){e.class("sapUiCalendarRowVis"+n)}if(a){e.attr("title",a)}var s=t.getWidth();if(s){e.style("width",s)}var l=t.getHeight();if(l){e.style("height",l)}e.openEnd();this.renderAppointmentsRow(e,t,i);e.close("div")};f.renderAppointmentsRow=function(e,t,a){var n=t.getId();e.openStart("div",n+"-Apps");e.class("sapUiCalendarRowApps");e.attr("role","list");e.openEnd();this.renderBeforeAppointments(e,t);this.renderAppointments(e,t,a);this.renderAfterAppointments(e,t);e.close("div")};f.renderBeforeAppointments=function(e,t){};f.renderAfterAppointments=function(e,t){};f.renderResizeHandle=function(e,t,a){};f.renderAppointments=function(e,t,n){var i=t._getVisibleAppointments();var r=t._getVisibleIntervalHeaders();var s=t._getStartDate();var l=[];var o=0;var p=0;var d=[];var c=0;var v=0;var f=t.getIntervals();var u=t.getIntervalType();var C=100/f;var A=0;var I=new a(s);var T=false;var h=false;switch(u){case g.Hour:l=t.getNonWorkingHours()||[];o=s.getUTCHours();p=24;break;case g.Day:case g.Week:case g.OneMonth:case"OneMonth":l=t._getNonWorkingDays();o=s.getUTCDay();p=7;d=t.getNonWorkingHours()||[];c=s.getUTCHours();v=24;break;case g.Month:d=t._getNonWorkingDays();c=s.getUTCDay();v=7;break;default:break}if(t._isOneMonthsRowOnSmallSizes()){this.renderSingleDayInterval(e,t,i,n,r,l,o,p,d,c,v,true,true)}else{for(A=0;A<f;A++){if(h){T=true}else{T=false}h=false;switch(u){case g.Hour:I.setUTCHours(I.getUTCHours()+1);if(I.getUTCHours()==0){h=true}break;case g.Day:case g.Week:case g.OneMonth:case"OneMonth":I.setUTCDate(I.getUTCDate()+1);if(I.getUTCDate()==1){h=true}break;case g.Month:c=I.getUTCDay();I.setUTCMonth(I.getUTCMonth()+1);if(I.getUTCMonth()==0){h=true}break;default:break}this.renderInterval(e,t,A,C,r,l,o,p,d,c,v,T,h)}this.renderIntervalHeaders(e,t,C,r,f);if(!(t._getRelativeInfo&&t._getRelativeInfo().bIsRelative)){e.openStart("div",t.getId()+"-Now");e.class("sapUiCalendarRowNow");e.openEnd();e.close("div")}for(A=0;A<i.length;A++){var m=i[A];this.renderAppointment(e,t,m,n)}e.openStart("div",t.getId()+"-DummyApp");e.class("sapUiCalendarApp");e.class("sapUiCalendarAppTitleOnly");e.class("sapUiCalendarAppDummy");e.class("sapUiCalendarAppHeight1");e.openEnd();e.close("div")}};f.writeCustomAttributes=function(e,t){};f.renderInterval=function(e,t,n,i,r,s,l,p,d,c,v,f,u){var C=t.getId()+"-AppsInt"+n;var A;var I=t.getShowIntervalHeaders()&&(t.getShowEmptyIntervalHeaders()||r.length>0);var T=t.getStartDate().getMonth();var h=o.getInstance(t.getStartDate().getFullYear(),T+1,0).getDate();e.openStart("div",C);e.class("sapUiCalendarRowAppsInt");e.style("width",i+"%");if(n>=h&&(t.getIntervalType()===g.OneMonth||t.getIntervalType()==="OneMonth")){e.class("sapUiCalItemOtherMonth")}if(t._isNonWorkingInterval(n,s,l,p)){e.class("sapUiCalendarRowAppsNoWork")}if(!I){e.class("sapUiCalendarRowAppsIntNoHead")}if(f){e.class("sapUiCalendarRowAppsIntFirst")}if(u){e.class("sapUiCalendarRowAppsIntLast")}this.writeCustomAttributes(e,t);e.openEnd();if(I){e.openStart("div");e.class("sapUiCalendarRowAppsIntHead");e.openEnd();e.close("div")}if(t.getShowSubIntervals()){var m=t.getIntervalType();var U=0;switch(m){case g.Hour:U=4;break;case g.Day:case g.Week:case g.OneMonth:case"OneMonth":U=24;break;case g.Month:var b=t._getStartDate();var S=new a(b);S.setUTCMonth(S.getUTCMonth()+n+1,0);U=S.getUTCDate();S.setUTCDate(1);l=S.getUTCDay();break;default:break}var R=100/U;for(A=0;A<U;A++){e.openStart("div");e.class("sapUiCalendarRowAppsSubInt");e.style("width",R+"%");if(t._isNonWorkingInterval(A,d,c,v)){e.class("sapUiCalendarRowAppsNoWork")}e.openEnd();e.close("div")}}e.close("div")};f.renderIntervalHeaders=function(e,t,a,n,i){var r=t.getShowIntervalHeaders()&&(t.getShowEmptyIntervalHeaders()||n.length>0);if(r){for(var s=0;s<n.length;s++){var l=n[s],o,p;if(t._bRTL){p=a*l.interval;o=a*(i-l.last-1)}else{o=a*l.interval;p=a*(i-l.last-1)}this.renderIntervalHeader(e,t,l,t._bRTL,o,p)}}};f.renderIntervalHeader=function(e,t,a,n,i,r){var s=a.appointment.getId(),l={role:"listitem",labelledby:{value:s+"-Descr",append:true}},o;var p=t._calculateAppoitnmentVisualCue(a.appointment);e.openStart("div",a.appointment);e.class("sapUiCalendarRowAppsIntHead");if(i!==undefined){e.style("left",i+"%")}if(r!==undefined){e.style("right",r+"%")}e.class("sapUiCalendarRowAppsIntHeadFirst");if(a.appointment.getSelected()){e.class("sapUiCalendarRowAppsIntHeadSel")}if(a.appointment.getTentative()){e.class("sapUiCalendarRowAppsIntHeadTent")}var g=a.appointment.getTooltip_AsString();if(g){e.attr("title",g)}var c=a.appointment.getType();var v=a.appointment.getColor();if(!v&&c&&c!=d.None){e.class("sapUiCalendarRowAppsIntHead"+c)}if(v){if(n){e.style("border-right-color",v)}else{e.style("border-left-color",v)}}e.accessibilityState(a.appointment,l);e.openEnd();e.openStart("div");e.class("sapUiCalendarIntervalHeaderCont");if(v){e.style("background-color",a.appointment._getCSSColorForBackground(v))}e.openEnd();if(p.appTimeUnitsDifRowStart>0){e.icon("sap-icon://arrow-left",["sapUiCalendarAppArrowIconLeft"],{title:null,role:"img"})}var f=a.appointment.getIcon();if(f){var u=["sapUiCalendarRowAppsIntHeadIcon"];var C={};C["id"]=s+"-Icon";C["title"]=null;C["alt"]=null;C["role"]="presentation";e.icon(f,u,C)}var A=a.appointment.getTitle();if(A&&!a.appointment.getCustomContent().length){e.openStart("span",s+"-Title");e.class("sapUiCalendarRowAppsIntHeadTitle");e.openEnd();e.text(A);e.close("span")}var I=a.appointment.getText();if(I&&!a.appointment.getCustomContent().length){e.openStart("span",s+"-Text");e.class("sapUiCalendarRowAppsIntHeadText");e.openEnd();e.text(I);e.close("span")}if(p.appTimeUnitsDifRowEnd>0){e.icon("sap-icon://arrow-right",["sapUiCalendarAppArrowIconRight"],{title:null,role:"img"})}o=t._oRb.getText("CALENDAR_START_TIME")+": "+t._oFormatAria.format(a.appointment.getStartDate())+"; "+t._oRb.getText("CALENDAR_END_TIME")+": "+t._oFormatAria.format(a.appointment.getEndDate());if(c&&c!==d.None){o+="; "+this.getAriaTextForType(c,this.getLegendItems(t))}e.openStart("span",s+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(o);e.close("span");e.close("div");e.close("div")};f.renderAppointment=function(e,t,a,n,i){var r=a.appointment;var s=r.getTooltip_AsString();var o=r.getType();var p=r.getColor();var g=r.getTitle();var f=r.getText();var u=r.getDescription();var C=r.getIcon();var A=r.getId();var I=t._getAppointmentReducedHeight(a);var T={role:"listitem",labelledby:{value:l.getStaticId("sap.ui.unified","APPOINTMENT")+" "+A+"-Descr",append:true},selected:null};var h=t._getAppointmentRowCount(a,I);var m=t.getAriaLabelledBy();var U=t._calculateAppoitnmentVisualCue(r);if(m.length>0){T["labelledby"].value=T["labelledby"].value+" "+m.join(" ")}if(g&&!r.getCustomContent().length){T["labelledby"].value=T["labelledby"].value+" "+A+"-Title"}if(f&&!r.getCustomContent().length){T["labelledby"].value=T["labelledby"].value+" "+A+"-Text"}e.openStart("div",r);e.class("sapUiCalendarApp");e.class("sapUiCalendarAppHeight"+h);if(r.getSelected()){e.class("sapUiCalendarAppSel");T["labelledby"].value=l.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED")+" "+T["labelledby"].value}else{T["labelledby"].value=l.getStaticId("sap.ui.unified","APPOINTMENT_UNSELECTED")+" "+T["labelledby"].value}if(r.getTentative()){e.class("sapUiCalendarAppTent");T["labelledby"].value=T["labelledby"].value+" "+l.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(h===1){e.class("sapUiCalendarAppTitleOnly")}if(C){e.class("sapUiCalendarAppWithIcon")}if(!i){if(t._bRTL){e.style("right",a.begin+"%");e.style("left",a.end+"%")}else{e.style("left",a.begin+"%");e.style("right",a.end+"%")}}e.attr("data-sap-level",a.level);if(t._sFocusedAppointmentId==A){e.attr("tabindex","0")}else{e.attr("tabindex","-1")}if(s){e.attr("title",s)}if(!p&&o&&o!=d.None){e.class("sapUiCalendarApp"+o)}if(p){if(t._bRTL){e.style("border-right-color",p)}else{e.style("border-left-color",p)}}e.accessibilityState(r,T);e.openEnd();e.openStart("div");e.class("sapUiCalendarAppCont");if(p&&t.getAppointmentsVisualization()===c.Filled){e.style("background-color",r._getCSSColorForBackground(p))}e.openEnd();if(r.getCustomContent().length){r.getCustomContent().forEach(function(t){e.renderControl(t)})}else{if(U.appTimeUnitsDifRowStart>0){e.icon("sap-icon://arrow-left",["sapUiCalendarAppArrowIconLeft"],{title:null,role:"img"})}if(C){var b=["sapUiCalendarAppIcon"];var S={};S["id"]=A+"-Icon";S["title"]=null;S["alt"]=null;S["role"]="presentation";e.icon(C,b,S)}e.openStart("div");e.class("sapUiCalendarAppTitleWrapper");e.openEnd();if(g){e.openStart("span",A+"-Title");e.class("sapUiCalendarAppTitle");e.openEnd();e.text(g);e.close("span")}if(f&&a.size!==v.HalfSize){e.openStart("span",A+"-Text");e.class("sapUiCalendarAppText");e.openEnd();e.text(f);e.close("span")}if(u&&a.size!==v.HalfSize&&(a.size!==v.Regular||!f)){e.openStart("span",A+"-Info");e.class("sapUiCalendarAppDescription");e.openEnd();e.text(u);e.close("span")}e.close("div");if(U.appTimeUnitsDifRowEnd>0){e.icon("sap-icon://arrow-right",["sapUiCalendarAppArrowIconRight"],{title:null,role:"img"})}}var R=t._oRb.getText("CALENDAR_START_TIME")+": "+t._oFormatAria.format(r.getStartDate());R=R+"; "+t._oRb.getText("CALENDAR_END_TIME")+": "+t._oFormatAria.format(r.getEndDate());if(t._getRelativeInfo&&t._getRelativeInfo().bIsRelative){var y=t._getRelativeInfo();R=t._oRb.getText("CALENDAR_START_TIME")+": "+y.intervalLabelFormatter(y._getIndexFromDate(r.getStartDate()));R=R+"; "+t._oRb.getText("CALENDAR_END_TIME")+": "+y.intervalLabelFormatter(y._getIndexFromDate(r.getEndDate()))}if(o&&o!=d.None){R=R+"; "+this.getAriaTextForType(o,n)}e.openStart("span",A+"-Descr");e.class("sapUiInvisibleText");e.openEnd();e.text(R);e.close("span");e.close("div");this.renderResizeHandle(e,t,r);e.close("div")};f.renderSingleDayInterval=function(i,r,s,l,p,d,c,v,f,u,C,A,I){var T=1,h=100,m=r.getId()+"-AppsInt"+T,U,b=r.getShowIntervalHeaders()&&(r.getShowEmptyIntervalHeaders()||p.length>0),S=o.getInstance(r.getStartDate()),R=S.getMonth(),y=o.getInstance(S.getFullYear(),R+1,0).getDate(),w,E=r._getPlanningCalendar(),D,_,H=[];S.setHours(0,0,0,0);D=s.concat(r.getIntervalHeaders().filter(function(e){var t=e.getStartDate().getTime(),a=e.getEndDate().getTime(),n=S.getTime(),i=n+1e3*60*60*24;return!(t>=i||a<=n)}).map(function(e){return{appointment:e,isHeader:true}})).sort(n._getComparer(S));if(E){H=E._getSelectedDates()}i.openStart("div",m);i.class("sapUiCalendarRowAppsInt");i.class("sapUiCalendarMonthRowAppsS");i.style("width",h+"%");if(T>=y&&(r.getIntervalType()===g.OneMonth||r.getIntervalType()==="OneMonth")){i.class("sapUiCalItemOtherMonth")}if(r._isNonWorkingInterval(T,d,c,v)){i.class("sapUiCalendarRowAppsNoWork")}if(!b){i.class("sapUiCalendarRowAppsIntNoHead")}if(A){i.class("sapUiCalendarRowAppsIntFirst")}if(I){i.class("sapUiCalendarRowAppsIntLast")}i.openEnd();if(b){i.openStart("div");i.class("sapUiCalendarRowAppsIntHead");i.openEnd();i.close("div")}if(H.length>0){var N=0,x=D.length;if(E.getRows()[0]._calculateVisibleAppointments){var M=E.getRows()[0]._calculateVisibleAppointments(H,D);N=M.iStart;x=M.iEnd}for(U=N;U<x;U++){_=D[U];i.openStart("div");i.class("sapUiCalendarAppContainer");i.openEnd();i.openStart("div");i.class("sapUiCalendarAppContainerLeft");i.openEnd();i.openStart("div");i.class("sapUiCalendarAppStart");i.openEnd();i.text(_.appointment._getDateRangeIntersectionText(S).start);i.close("div");i.openStart("div");i.class("sapUiCalendarAppEnd");i.openEnd();i.text(_.appointment._getDateRangeIntersectionText(S).end);i.close("div");i.close("div");i.openStart("div");i.class("sapUiCalendarAppContainerRight");i.openEnd();if(_.isHeader){this.renderIntervalHeader(i,r,_)}else{this.renderAppointment(i,r,_,l,true)}i.close("div");i.close("div")}}if(s.length===0||H.length===0){i.openStart("div");i.class("sapUiCalendarNoApps");i.openEnd();var k=e.getElementById(r.getAssociation("row"));w=k.getNoAppointmentsText()?k.getNoAppointmentsText():t.getResourceBundleFor("sap.m").getText("PLANNINGCALENDAR_ROW_NO_APPOINTMENTS");i.text(w);i.close("div")}if(!(r._getRelativeInfo&&r._getRelativeInfo().bIsRelative)){i.openStart("div",r.getId()+"-Now");i.class("sapUiCalendarRowNow");i.openEnd()}i.close("div");i.openStart("div",r.getId()+"-DummyApp");i.class("sapUiCalendarApp");i.class("sapUiCalendarAppTitleOnly");i.class("sapUiCalendarAppDummy");i.style("margin","0");i.style("height","0px");i.openEnd();i.close("div");if(r.getShowSubIntervals()){var L=r.getIntervalType();var O=0;switch(L){case g.Hour:O=4;break;case g.Day:case g.Week:case g.OneMonth:case"OneMonth":O=24;break;case g.Month:var F=new a(S);F.setUTCMonth(F.getUTCMonth()+T+1,0);O=F.getUTCDate();F.setUTCDate(1);c=F.getUTCDay();break;default:break}var W=100/O;for(U=0;U<O;U++){i.openStart("div");i.class("sapUiCalendarRowAppsSubInt");i.style("width",W+"%");if(r._isNonWorkingInterval(U,f,u,C)){i.class("sapUiCalendarRowAppsNoWork")}i.openEnd();i.close("div")}}i.close("div")};f.getLegendItems=function(t){var a=[],n,i=t.getLegend();if(i){n=e.getElementById(i);if(n){a=n.getItems()}else{p.error("CalendarLegend with id '"+i+"' does not exist!",t)}}return a};f.getAriaTextForType=function(e,t){var a,n,r,s;if(t&&t.length){for(var s=0;s<t.length;s++){r=t[s];if(r.getType()===e){a=r.getText();break}}}if(!a){n=i.getTypeAriaText(e);if(n){a=n.getText()}}return a};return f},true);
//# sourceMappingURL=CalendarRowRenderer.js.map